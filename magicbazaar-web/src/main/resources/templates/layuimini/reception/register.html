<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Aroma Shop - Login</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/all.min.css" rel="stylesheet">
    <link href="/css/themify-icons.css" rel="stylesheet">
    <link href="/css/style1.css" rel="stylesheet">
    <link href="/css/owl.theme.default.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.min.css" rel="stylesheet">
    <link href="/css/nice-select.css" rel="stylesheet">
    <link href="/css/nouislider.min.css" rel="stylesheet">

    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
<!--================ Start Header Menu Area =================-->
<header class="header_area">
    <div class="main_menu">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand logo_h" href="/reception/index"><img alt="" src="/picture/logo.png"></a>
                <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                        class="navbar-toggler" data-target="#navbarSupportedContent" data-toggle="collapse"
                        type="button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
                    <ul class="nav navbar-nav menu_nav ml-auto mr-auto">
                        <li class="nav-item"><a class="nav-link" href="/reception/url/index">主页</a></li>
                        <li class="nav-item"><a class="nav-link" href="/reception/url/category">购物</a></li>
<!--                        <li class="nav-item"><a class="nav-link" href="/reception/url/stars">收藏</a></li>-->
                        <li class="nav-item"><a class="nav-link" href="/reception/url/singleblog">订单</a></li>
                    </ul>

                    <ul class="nav-shop">
                        <li class="nav-item">
                            <button><a href="/reception/url/cart"><i class="ti-shopping-cart"></i><span
                                    class="nav-shop__circle"></span></a></button>
                        </li>
                        <li class="nav-item"><a class="button button-header" href="/reception/url/blog">个人中心</a>
                            </li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>
<!--================ End Header Menu Area =================-->

<!-- ================ start banner area ================= -->
<section class="blog-banner-area" id="category" style="overflow: hidden">
    <img alt="" src="/images/backtop.jpg" style="width: 100%;margin-top: -500px;opacity: 0.1;">
    <div class="container h-100">
        <div class="blog-banner">
            <div class="text-center">
                <h1>注册</h1>
                <nav aria-label="breadcrumb" class="banner-breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:">主页</a></li>
                        <li aria-current="page" class="breadcrumb-item active">注册</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- ================ end banner area ================= -->

<!--================Login Box Area =================-->
<section class="login_box_area section-margin">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="login_box_img">
                    <div class="hover">
                        <h4>已经有一个帐户？</h4>
                        <p>科学技术每天都在进步，这就是一个很好的例子</p>
                        <a class="button button-account" href="/reception/login">现在登录</a>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="login_form_inner register_form_inner">
                    <h3>创建账户</h3>
                    <form class="row login_form" id="register_form">
                        <div class="col-md-12 form-group">
                            <input class="form-control" id="username" name="username" onblur="this.placeholder = '用户名'"
                                   onfocus="this.placeholder = ''" placeholder="用户名" required type="text">
                        </div>
                        <div class="col-md-12 form-group">
                            <input class="form-control" id="email" name="email"
                                   onblur="this.placeholder = '邮箱地址'" onfocus="this.placeholder = ''"
                                   placeholder="邮箱地址" required type="email">
                        </div>
                        <div class="col-md-12 form-group">
                            <input class="form-control" id="password" name="password"
                                   onblur="this.placeholder = '密码'" onfocus="this.placeholder = ''"
                                   placeholder="密码" required type="password">
                        </div>
                        <div class="col-md-12 form-group">
                            <input class="form-control" id="confirmPassword" name="confirmPassword"
                                   onblur="this.placeholder = '再一次确认密码'" onfocus="this.placeholder = ''"
                                   placeholder="再一次确认密码" required type="password">
                        </div>
                        <div class="col-md-12 form-group">
                            <input class="form-control" id="phone" name="phone"
                                   onblur="this.placeholder = '手机号'" onfocus="this.placeholder = ''"
                                   placeholder="手机号" required type="text">
                        </div>
                        <div class="col-md-12 form-group">
                            <div class="creat_account">
                                <input id="f-option2" name="selector" type="checkbox">
                                <label for="f-option2">保持登陆状态</label>
                            </div>
                        </div>
                        <div class="col-md-12 form-group">
                            <button class="button button-register w-100" type="submit" value="submit">注册</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
<!--================End Login Box Area =================-->


<!--================ Start footer Area  =================-->
<footer>
    <div class="footer-area footer-only">
        <div class="container">
            <div class="row section_gap">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-footer-widget tp_widgets ">
                        <h4 class="footer_title large_title">关于我们</h4>
                        <p>
                            So seed seed green that winged cattle in. Gathering thing made fly you're no
                            divided deep moved us lan Gathering thing us land years living.
                        </p>
                        <p>
                            So seed seed green that winged cattle in. Gathering thing made fly you're no divided deep
                            moved
                        </p>
                    </div>
                </div>
                <div class="offset-lg-1 col-lg-2 col-md-6 col-sm-6">
                    <div class="single-footer-widget tp_widgets">
                        <h4 class="footer_title">快速链接</h4>
                        <ul class="list">
                            <li><a href="/reception/url/index">主页</a></li>
                            <li><a href="/reception/url/category">购物</a></li>
                            <li><a href="/reception/url/stars">收藏</a></li>
                            <li><a href="/reception/url/singleblog">订单</a></li>
                            <li><a href="/reception/url/blog">个人中心</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6">
                    <div class="single-footer-widget instafeed">
                        <h4 class="footer_title">画廊</h4>
                        <ul class="list instafeed d-flex flex-wrap">
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/84910587-4.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/84910587-4_fe7fc0b0.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/93473348-2.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/96721607-2.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/97206605-2.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/97206605-2_b20c87c9.jpg"></li>
                        </ul>
                    </div>
                </div>
                <div class="offset-lg-1 col-lg-3 col-md-6 col-sm-6">
                    <div class="single-footer-widget tp_widgets">
                        <h4 class="footer_title">联系我们</h4>
                        <div class="ml-40">
                            <p class="sm-head">
                                <span class="fa fa-location-arrow"></span>
                                总公司
                            </p>
                            <p>a243, ShuangHe Street, ZhengZhou City</p>

                            <p class="sm-head">
                                <span class="fa fa-phone"></span>
                                手机号码
                            </p>
                            <p>
                                +86 189 3729 9235 <br>
                                +86 195 4562 5076
                            </p>

                            <p class="sm-head">
                                <span class="fa fa-envelope"></span>
                                邮箱
                            </p>
                            <p>
                                3304079457@qq.com <br>
                                www.magicbazaar.top
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="container">
            <div class="row d-flex">
                <p class="col-lg-12 footer-text text-center">
                    Copyright &copy; 2021.Company Overidea All rights reserved
                </p>
            </div>
        </div>
    </div>
</footer>
<!--================ End footer Area  =================-->


<script src="/js/jquery-3.2.1.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/skrollr.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.nice-select.min.js"></script>
<script src="/js/jquery.ajaxchimp.min.js"></script>
<script src="/js/mail-script.js"></script>
<script src="/js/main.js"></script>
<script charset="utf-8" src="/lib/layui-v2.6.3/layui.js"></script>
<script charset="utf-8" src="/js/lay-config.js?v=2.0.0"></script>
<link href="/lib/layui-v2.6.3/css/layui.css" media="all" rel="stylesheet">
<script>
    $(function () {
        cartNum();
    })

    function cartNum() {
        $.ajax({
            url: '/reception/commodity/cartnum',
            type: 'post',
            success: function (result) {
                console.log(result.data)
                $('.nav-shop__circle').text(result.data);
            }
        })
    }

    $('.button-register').on('click', function () {
        const username = $('input[name="username"]').val();
        const email = $('input[name="email"]').val();
        const password = $('input[name="password"]').val();
        const confirmPassword = $('input[name="confirmPassword"]').val();
        const phone = $('input[name="phone"]').val();

        if (!(username.length >= 6 && username.length <= 16)) {
            layer.msg('请输入6-16位的用户名');
            return false;
        }
        if (!(/^[A-z0-9]{6,16}[@][A-z0-9]+[.][A-z0-9]+$/.test(email))) {
            layer.msg('请输入正确的邮箱');
            return false;
        }
        if (!(password.length >= 6 && password.length <= 16)) {
            layer.msg('请输入6-16位的密码');
            return false;
        }
        if (!(password === confirmPassword)) {
            layer.msg('两次输入的密码不一致');
            return false;
        }
        if (!(/^\d{11}$/.test(phone))) {
            layer.msg('请输入正确的手机号');
            return false;
        }

        $.ajax({
            url: '/reception/user/checkusername',
            data: {
                username: username
            },
            dataType: 'json',
            type: 'post',
            success: function (result) {
                if (result.success) {
                    $.ajax({
                        url: '/reception/user/registercode',
                        data: {
                            phone: phone
                        },
                        dataType: 'json',
                        type: 'post',
                        success: function (result) {
                            if (result.success) {
                                layer.prompt({
                                    formType: 0,
                                    title: '手机验证码',
                                    placeholder: '已向你手机发送验证码，请输入验证码',
                                }, function (value, index) {
                                    $.ajax({
                                        url: '/reception/user/checkregistercode',
                                        data: {
                                            registerCode: value
                                        },
                                        datatype: 'json',
                                        type: 'post',
                                        success: function (result) {
                                            if (result.success) {
                                                $.ajax({
                                                    url: '/reception/user/register',
                                                    data: {
                                                        username: username,
                                                        password: password,
                                                        email: email,
                                                        phone: phone
                                                    },
                                                    dataType: 'json',
                                                    type: 'post',
                                                    success: function (result) {
                                                        if (result.success) {
                                                            layer.msg(result.msg, {
                                                                end: function () {
                                                                    window.location.href = '/reception/login';
                                                                }
                                                            })
                                                        } else {
                                                            layer.msg(result.msg);
                                                        }
                                                    }
                                                })
                                            } else {
                                                layer.msg('验证码错误');
                                            }
                                            layer.close(index);
                                        }
                                    })
                                })
                            }
                        }
                    })
                } else {
                    layer.msg(result.msg);
                }
            }
        })
        return false;
    })
</script>
</body>
</html>