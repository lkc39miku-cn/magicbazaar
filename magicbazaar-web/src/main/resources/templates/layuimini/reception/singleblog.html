<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Aroma Shop - Blog Details</title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/all.min.css" rel="stylesheet">
    <link href="/css/themify-icons.css" rel="stylesheet">
    <link href="/css/style1.css" rel="stylesheet">
    <link href="/css/owl.theme.default.min.css" rel="stylesheet">
    <link href="/css/owl.carousel.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="/lib/layui-v2.6.3/css/layui.css" media="all" rel="stylesheet">
    <style>
        body, p {
            margin: revert;
        }
    </style>
    <style>
        .author_img {
            width: 100px;
            height: 100px;
        }
        .message-info {
            width: 75%;
            margin: 0 auto;
        }
        .layui-card {
            display: flex;
            margin-top: 15px;
            height: 45px;
            line-height: 30px;
        }
        .right {
            flex-direction: row-reverse;
        }
        .order-card {
            margin: 10px 0;
        }
        .order-card-header {
            position: relative;
            box-shadow: rgba(0, 0, 0, 0.16) 1px 2px 6px 1px;
            padding: 2px 12px;
        }
        .order-card-header-text {
            padding: 0 0 0 20px;
        }
        .order-card-body {
            display: none;
            position: relative;
            box-shadow: rgba(0, 0, 0, 0.16) 0 1px 4px 1px;
            padding: 2px 12px;
        }
        .show-body, .blue-btn {
            margin: 0 5px;
            padding: 0 5px;
            height: 22px;
            line-height: 22px;
            font-size: 12px;
            border: none;
            background: #1E9FFF;
            color: white;
        }
        .show-body {
            margin-left: 140px;
        }
        .warn-btn {
            margin: 0 5px;
            padding: 0 5px;
            height: 22px;
            line-height: 22px;
            font-size: 12px;
            background: #FFB800;
            color: white;
            border: none;
        }
        .order-card-body-child-flex {
            display: flex;
            padding: 0 5px;
        }
        .child-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            margin-top: 13px;
        }
        .paypal-btn {
            margin: 0 5px;
            height: 22px;
            line-height: 22px;
            padding: 0 5px;
            font-size: 12px;
            background: #FF5722;
            border: none;
            color: white;
        }
        .child-text {
            padding: 12px 0 0 20px;
        }
        .order-info-img {
            width: 100%;
            height: auto;
        }
        .order-card-header-right {
            position: absolute;
            right: 50px;
            top: 0;
        }
        .order-card-body-child-right {
            position: absolute;
            right: 87px;
            top: 30px;
        }
        .order-card-body-child {
            position: relative;
        }
        .online {
            height: 58px;
            line-height: 58px;
            border-radius: 50%;
            position: fixed;
            right: 20px;
            bottom: 10px;
        }
    </style>
</head>
<body>
<!--================ Start Header Menu Area =================-->
<header class="header_area">
    <div class="main_menu">
        <nav class="navbar navbar-expand-lg navbar-light">
            <div class="container">
                <a class="navbar-brand logo_h" href="/reception/index"><img alt="" src="/picture/logo.png"></a>
                <button aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"
                        class="navbar-toggler" data-target="#navbarSupportedContent" data-toggle="collapse"
                        type="button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
                    <ul class="nav navbar-nav menu_nav ml-auto mr-auto">
                        <li class="nav-item"><a class="nav-link" href="/reception/url/index">主页</a></li>
                        <li class="nav-item"><a class="nav-link" href="/reception/url/category">购物</a></li>
                        <li class="nav-item"><a class="nav-link" href="/reception/url/singleblog">订单</a></li>
                    </ul>

                    <ul class="nav-shop">
                        <li class="nav-item">
                            <button><a href="/reception/url/cart"><i class="ti-shopping-cart"></i><span
                                    class="nav-shop__circle"></span></a></button>
                        </li>
                        <li class="nav-item user-center"><a class="button button-header " href="/reception/url/blog">个人中心</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </div>
</header>
<!--================ End Header Menu Area =================-->


<!-- ================ start banner area ================= -->
<section class="blog-banner-area" id="blog" style="overflow: hidden">
    <img alt="" src="/images/backtop.jpg" style="width: 100%;margin-top: -500px;opacity: 0.1;">
    <div class="container h-100">
        <div class="blog-banner">
            <div class="text-center">
                <h1>订单详情</h1>
                <nav aria-label="breadcrumb" class="banner-breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:">主页</a></li>
                        <li aria-current="page" class="breadcrumb-item active">订单详情</li>
                    </ol>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- ================ end banner area ================= -->


<!--================Blog Area =================-->
<section class="blog_area single-post-area py-80px section-margin--small">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 posts-list">
            </div>
            <div class="col-lg-4">
                <div class="blog_right_sidebar">
                    <aside class="single_sidebar_widget search_widget">
                        <div class="input-group">
                            <input class="form-control orderNumber" placeholder="订单编号" type="text">
                            <span class="input-group-btn">
                            <button class="btn btn-default search-number" type="button">
                                    <i class="lnr lnr-magnifier"></i>
                            </button>
                    </span>
                        </div>
                        <!-- /input-group -->
                        <div class="br"></div>
                    </aside>
                    <aside class="single_sidebar_widget author_widget">
                        <img alt="" class="author_img rounded-circle" src="">
                        <h4 class="user-name"></h4>
                        <p>联系方式</p>
                        <div class="social_icon">
                            <a href="https://socialblade.com/youtube/c/overidea/realtime">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="https://twitter.com/realoverideahq">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="https://github.com/shimizumirika">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="https://space.bilibili.com/1393204919?spm_id_from=333.1007.0.0">
                                <i class="fab fa-behance"></i>
                            </a>
                        </div>
                        <div class="br"></div>
                    </aside>

                    <aside class="single_sidebar_widget post_category_widget">
                        <h4 class="widget_title">订单类型</h4>
                        <ul class="list cat-list commodity_type_number">
                        </ul>
                        <div class="br"></div>
                    </aside>
                </div>
            </div>
        </div>
    </div>
</section>
<!--================Blog Area =================-->

<!--================ Start footer Area  =================-->
<footer>
    <div class="footer-area footer-only">
        <div class="container">
            <div class="row section_gap">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="single-footer-widget tp_widgets ">
                        <h4 class="footer_title large_title">关于我们</h4>
                        <p>
                            So seed seed green that winged cattle in. Gathering thing made fly you're no
                            divided deep moved us lan Gathering thing us land years living.
                        </p>
                        <p>
                            So seed seed green that winged cattle in. Gathering thing made fly you're no divided deep
                            moved
                        </p>
                    </div>
                </div>
                <div class="offset-lg-1 col-lg-2 col-md-6 col-sm-6">
                    <div class="single-footer-widget tp_widgets">
                        <h4 class="footer_title">快速链接</h4>
                        <ul class="list">
                            <li><a href="/reception/url/index">主页</a></li>
                            <li><a href="/reception/url/category">购物</a></li>
                            <li><a href="/reception/url/stars">收藏</a></li>
                            <li><a href="/reception/url/singleblog">订单</a></li>
                            <li><a href="/reception/url/blog">个人中心</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 col-sm-6">
                    <div class="single-footer-widget instafeed">
                        <h4 class="footer_title">画廊</h4>
                        <ul class="list instafeed d-flex flex-wrap">
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/84910587-4.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/84910587-4_fe7fc0b0.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/93473348-2.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/96721607-2.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/97206605-2.jpg"></li>
                            <li style="width: 70px;height: 70px;"><img style="width: 100%;height: 100%" alt="" src="/images/97206605-2_b20c87c9.jpg"></li>
                        </ul>
                    </div>
                </div>
                <div class="offset-lg-1 col-lg-3 col-md-6 col-sm-6">
                    <div class="single-footer-widget tp_widgets">
                        <h4 class="footer_title">联系我们</h4>
                        <div class="ml-40">
                            <p class="sm-head">
                                <span class="fa fa-location-arrow"></span>
                                总公司
                            </p>
                            <p>a243, ShuangHe Street, ZhengZhou City</p>

                            <p class="sm-head">
                                <span class="fa fa-phone"></span>
                                手机号码
                            </p>
                            <p>
                                +86 189 3729 9235 <br>
                                +86 195 4562 5076
                            </p>

                            <p class="sm-head">
                                <span class="fa fa-envelope"></span>
                                邮箱
                            </p>
                            <p>
                                3304079457@qq.com <br>
                                www.magicbazaar.top
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-bottom">
        <div class="container">
            <div class="row d-flex">
                <p class="col-lg-12 footer-text text-center">
                    Copyright &copy; 2021.Company Overidea All rights reserved
                </p>
            </div>
        </div>
    </div>
</footer>
<button class="layui-btn layui-bg-blue online"><i class="layui-icon layui-icon-username"></i></button>

<!--================ End footer Area  =================-->

<form action="/reception/alipay/repay" method="post" hidden>
    <input type="text" name="orderId">
    <button type="submit" class="alipay-btn"></button>
</form>
<div class="message-info" style="display: none">
</div>
<form class="comment-form layui-form"  style="display: none">
    <input type="text" name="stars" hidden>
    <input type="text" name="id" hidden>
    <div class="layui-form-item">
        <div class="layui-input-block">
            <label class="layui-form-label">评分：</label>
            <div class="layui-input-block">
                <div class="rate">
                </div>
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-input-block">
            <label class="layui-form-label">内容：</label>
            <div class="layui-input-block">
                <textarea class="layui-textarea" placeholder="请输入你的评价！" required lay-verify="required" name="commentInfo"></textarea>
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-inline">
            <button type="submit" lay-submit="" lay-filter="rate" class="layui-btn layui-bg-blue">提交</button>
            <button type="reset" class="data-reset-btn" hidden></button>
        </div>
    </div>
</form>
<script src="/lib/jquery-3.4.1/jquery-3.4.1.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/skrollr.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.nice-select.min.js"></script>
<script src="/js/jquery.ajaxchimp.min.js"></script>
<script src="/js/mail-script.js"></script>
<script src="/js/main.js"></script>
<script charset="utf-8" src="/lib/layui-v2.6.3/layui.js"></script>
<script charset="utf-8" src="/js/lay-config.js?v=1.0.4"></script>
<script>
    $(function () {

        $.ajax({
            type: 'post',
            url: '/reception/user/checklogin',
            success: function (result) {
                if (result.success) {
                    $('.user-center').append('<a class="button button-header logout-btn" href="javascript:">登出</a>')
                }
            }
        })

        $('.online').on('click', function () {
            layer.open({
                type: 2,
                title: '在线咨询',
                area: ['380px', '90%'],
                content: '/reception/url/online',
                shade: 0
            });
        })

        $(document).on('click', '.logout-btn', function () {
            $.ajax({
                type: 'post',
                url: '/reception/token/logout',
                success: function (result) {
                    if (result.success) {
                        layer.msg('注销成功', {
                            end: function () {
                                window.location.href = '/reception/login';
                            }
                        })
                    }
                }
            })
        })

        $(document).on("click", '.show-body', function () {
            const that = $(this).parent().parent().next();
            that.slideToggle('slow');
        })

        $(document).on('click', '.go-paypal', function () {
            const that = $(this);
            layer.confirm('确定要继续支付该订单吗？', function (index) {
                $('input[name="orderId"]').val(that.val());

                $('.alipay-btn').click();
                layer.close(index);
            })
        })

        $(document).on('click', '.change-one', function () {
            const that = $(this);
            layer.confirm('确定要对此订单进行换货吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/changeone',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.go-success', function () {
            const that = $(this);
            layer.confirm('测试使用，直接成功？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/gosuccess',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.change-all', function () {
            const that = $(this);
            layer.confirm('确定要对此订单进行全部换货吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/changeall',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.exit-info-one', function () {
            loadMessage($(this).val());
            dataValue = $(this).val();
            layer.open({
                title: '信息详情',
                type: 1,
                shade: 0.2,
                shadeClose: true,
                area: ['80%', '80%'],
                content: $('.message-info'),
                cancel: function () {
                    $('.message-info').css('display', 'none');
                }
            });
        })

        $(document).on('click', '.exit-all', function () {
            const that = $(this);
            layer.confirm('确定要对此订单进行全部退货吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/exitall',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.exit-one', function () {
            const that = $(this);
            layer.confirm('确定要对此订单进行退货吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/exitone',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.delete-btn-one', function () {
            const that = $(this);
            layer.confirm('确定要删除该订单吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/deleteone',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.delete-btn-all', function () {
            const that = $(this);
            layer.confirm('确定要删除该订单中的所有子订单吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/deleteall',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.have-one', function () {
            const that = $(this);
            layer.confirm('确定要对此订单进行收货吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/haveone',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.have-all', function () {
            const that = $(this);
            layer.confirm('确定要对此订单进行全部收货吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/haveall',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        $(document).on('click', '.comment-info', function () {
            const that = $(this);
            layer.confirm('确定要评价该商品吗？', function (index1) {

                $('input[name="id"]').val(that.val());

                index = layer.open({
                    title: '商品评价',
                    type: 1,
                    shade: 0.2,
                    shadeClose: true,
                    area: ['80%', '80%'],
                    content: $('.comment-form'),
                    cancel: function () {
                        $('.comment-form').css('display', 'none');
                    }
                });
                layer.close(index1);
            })
        })

        $(document).on('click', '.commodity-type-btn', function () {
            type = $(this).attr('lay-value');
            $('.posts-list').empty();
            loadOrder()
        })

        $(document).on('click', '.commodity-type-btn-reset', function () {
            type = '';
            $('.posts-list').empty();
            loadOrder()
        })

        $('.search-number').on('click', function () {
            $('.posts-list').empty();
            data = $('.orderNumber').val();
            loadOrder()
        })

        $(document).on('click', '.close-paypal', function () {
            const that = $(this);
            layer.confirm('确定要取消该订单吗？', function (index) {

                $.ajax({
                    type: 'post',
                    url: '/reception/order/closepaypal',
                    data: {
                        id: that.val()
                    },
                    dataType: 'json',
                    success: function (result) {
                        if (result.success) {
                            $('.posts-list').empty();
                            loadOrder();
                        }
                        layer.msg(result.msg);
                        layer.close(index);
                    }
                })
            })
        })

        loadOrder();
        cartNum();
        userLoad();
        commodityTypeNumber();
    })

    function cartNum() {
        $.ajax({
            url: '/reception/commodity/cartnum',
            type: 'post',
            success: function (result) {
                console.log(result.data)
                $('.nav-shop__circle').text(result.data);
            }
        })
    }

    let dataValue;
    let index;
    let data = '';
    let type = '';
    let time = '';

    layui.use(['rate', 'form', 'layer'], function(){
        const rate = layui.rate;
        const form = layui.form;
        const layer = layui.layer;

        //渲染
        const ins1 = rate.render({
            elem: '.rate'
            ,length: 5
            ,value: 0
            ,half: true
            ,text: true
            ,setText: function(value){
                const arrs = {
                    '0': '请选择你的评分',
                    '0.5': '极差'
                    , '1': '极差'
                    , '1.5': '极差'
                    , '2': '差'
                    , '2.5': '差'
                    , '3': '中等'
                    , '3.5': '中等'
                    , '4': '好'
                    , '4.5': '好'
                    , '5': '非常好'
                };
                this.span.text(arrs[value] || ( value + "星"));
            }
            ,choose: function (value) {
                $('input[name="stars"]').val(value);
            }
        });

        form.on('submit(rate)', function (data) {
            if (data.field.stars === null || data.field.stars === '') {
                layer.msg('请选择你的评分');
                return false;
            }

            $.ajax({
                url: '/reception/order/rate',
                type: 'post',
                dataType: 'json',
                data: data.field,
                success: function (result) {
                    if (result.success) {
                        layer.msg('评价成功');
                        $('.posts-list').empty();
                        loadOrder();
                        $('.data-reset-btn').click();
                    } else {
                        layer.msg(result.msg);
                    }
                    layer.close(index);
                }
            })
            return false;
        })

        form.on('submit(reply)', function (data) {
            $.ajax({
                type: 'post',
                data: data.field,
                dataType: 'json',
                url: '/reception/user/reply',
                success: function (result) {
                    if (result.success) {
                        layer.msg(result.msg);
                        loadMessage(dataValue);
                    }
                }
            })

            return false;
        })
    });

    function loadMessage(data) {
        $.ajax({
            type: 'post',
            url: '/reception/order/dispute/info',
            data: {
                commodityDisputeInfoId: data
            },
            dataType: 'json',
            success: function (result) {
                const message = $('.message-info');
                message.empty();
                console.log(result.data)
                $.each(result.data, function (i, object) {
                    message.append('<div class="layui-card"><div><img src="' + object.userAvatar + '" class="layui-nav-img"></div><div class="text-info">' + object.userName + ':' + object.context + '</div></div>');
                    if (object.staffName !== null) {
                        message.append('<div class="layui-card right"><div><img src="/image/bfe4f33b-d2ff-4930-b817-66570aae4a33.jpg" class="layui-nav-img"></div><div class="text-info">' + object.replyContext + ':' + object.staffName + '</div></div>');
                    }
                })

                if (result.data[result.data.length - 1].staffId !== null) {
                    message.append('<form class="layui-form">\n' +
                        '        <div class="layui-form-item">\n' +
                        '            <label class="layui-form-label">回复：</label>\n' +
                        '            <div class="layui-input-block">\n' +
                        '                <input type="text" name="id" value="' + data + '" hidden>\n' +
                        '                <input type="text" placeholder="请输入回复内容" name="context" lay-filter="required" required class="layui-input" style="display: inline-block;width: 80%">\n' +
                        '                <button type="submit" class="layui-btn layui-bg-blue" lay-filter="reply" lay-submit="">回复</button>\n' +
                        '            </div>\n' +
                        '        </div>\n' +
                        '    </form>')
                    layui.form.render();
                }
            }
        })
    }

    function loadOrder() {
        layui.use('flow', function(){
            const $ = layui.jquery;
            const flow = layui.flow;
            flow.load({
                elem: '.posts-list'
                ,isAuto: true
                ,mb: 1500
                ,done: function(page, next){
                    const lis = [];

                    $.ajax({
                        type: 'post',
                        data: {
                            page: page,
                            pageSize: 5,
                            orderNumber: data,
                            type: type,
                            time: time
                        },
                        dataType: 'json',
                        url: '/reception/order/list',
                        success: function (result) {
                            let html = '';

                            layui.each(result.data, function(index, item) {

                                html += '<div class="order-card">\n' +
                                    '                    <div class="order-card-header">\n' +
                                    '                        <div class="order-card-header-text">\n' +
                                    '                            <p>订单编号：' + item.orderNumber + '</p>\n' +
                                    '                            <p>支付方式：' + item.paypalName + '</p>\n' +
                                    '                            <p>账单金额：' + item.money + '元</p>\n' +
                                    '                        </div>\n' +
                                    '                        <div class="order-card-header-right">\n' +
                                    '                            <p>创建时间：' + item.createTime + '</p>' +
                                    '<p>状态：';


                                if (item.orderTypeId === 8) {
                                    html += '<button class="paypal-btn">状态异常</button>'
                                } else if (item.orderTypeId === 9) {
                                    html += '<button class="warn-btn">正在进行中</button>'
                                } else if (item.orderTypeId === 10) {
                                    html += '<button class="blue-btn">完成订单</button>'
                                } else if (item.orderTypeId === 15) {
                                    html += '<button class="blue-btn">订单已取消</button>'
                                } else if (item.orderTypeId === 16) {
                                    html += '<button class="blue-btn">订单已超时</button>'
                                }

                                html += '</p>\n' +
                                    '                            <button class="show-body">订单详情</button>\n' +
                                    '                        </div>\n' +
                                    '                    </div>\n' +
                                    '                    <div class="order-card-body">\n';

                                $.each(item.child, function (i, object) {
                                    html += '<div class="order-card-body-child">\n' +
                                        '                            <div class="order-card-body-child-flex">\n' +
                                        '                                <div class="child-img">\n' +
                                        '                                    <a href="/reception/commodity/' + object.commodityId + '"><img src="' + object.commodityPhoto + '" alt="" class="order-info-img"></a>\n' +
                                        '                                </div>\n' +
                                        '                                <div class="child-text">\n' +
                                        '                                    <p>商品名称：<a href="/reception/commodity/' + object.commodityId + '">' + object.commodityName.substring(0, 12).concat('...') + '</a></p>\n' +
                                        '                                    <p>单价：' + object.price + '\t数量：' + object.number + '\t总价' + object.allPrice +  '元</p>\n' +
                                        '                                    <p>地址：' + object.userAddressName.substring(0, 12).concat('...') + '</p>\n' +
                                        '                                </div>\n' +
                                        '                            </div>\n' +
                                        '                            <div class="order-card-body-child-right">\n' +
                                        '                                <p>状态：';


                                    if (object.orderTypeId === 1) {
                                        html += '<button class="paypal-btn">待支付</button>'
                                    } else if (object.orderTypeId === 2) {
                                        html += '<button class="warn-btn">待发货</button>'
                                    } else if (object.orderTypeId === 3) {
                                        html += '<button class="warn-btn">待收货</button>'
                                    } else if (object.orderTypeId === 4) {
                                        html += '<button class="blue-btn">待评价</button>'
                                    } else if (object.orderTypeId === 5) {
                                        html += '<button class="blue-btn">已完成</button>'
                                    } else if (object.orderTypeId === 6) {
                                        html += '<button class="paypal-btn">换货中</button>'
                                    } else if (object.orderTypeId === 7) {
                                        html += '<button class="paypal-btn">退货中</button>'
                                    } else if (object.orderTypeId === 11) {
                                        html += '<button class="paypal-btn">已退款</button>'
                                    } else if (object.orderTypeId === 13) {
                                        html += '<button class="paypal-btn">已拒绝退款</button>'
                                    } else if (object.orderTypeId === 14) {
                                        html += '<button class="paypal-btn">已拒绝退款</button>'
                                    } else if (item.orderTypeId === 15) {
                                        html += '<button class="blue-btn">订单已取消</button>'
                                    } else if (item.orderTypeId === 16) {
                                        html += '<button class="blue-btn">订单已超时</button>'
                                    }

                                        html += '</p><p>更改：';

                                    if (object.orderTypeId === 2) {
                                        html += '<button class="paypal-btn exit-one" value="' + object.id + '">退货退款</button>'
                                    } else if (object.orderTypeId === 3) {
                                        html += '<button class="warn-btn have-one" value="' + object.id + '">收货</button>'
                                        html += '<button class="paypal-btn exit-one" value="' + object.id + '">退货退款</button>'
                                    } else if (object.orderTypeId === 4) {
                                        html += '<button class="blue-btn comment-info" value="' + object.id + '">评价</button>'
                                        html += '<button class="warn-btn change-one" value="' + object.id + '">换货</button>'
                                        html += '<button class="paypal-btn exit-one" value="' + object.id + '">退货退款</button>'
                                    } else if (object.orderTypeId === 5) {
                                        html += '<button class="warn-btn change-one" value="' + object.id + '">换货</button>'
                                        html += '<button class="paypal-btn exit-one" value="' + object.id + '">退货退款</button>'
                                        html += '<button class="blue-btn delete-btn-one" value="' + object.id + '">删除</button>'
                                    } else if (object.orderTypeId === 6) {
                                        html += '<button class="blue-btn exit-info-one" value="' + object.id + '">信息</button>'
                                        html += '<button class="warn-btn" value="' + object.id + '">当前订单正在换货中</button>'
                                    } else if (object.orderTypeId === 7) {
                                        html += '<button class="blue-btn exit-info-one" value="' + object.id + '">信息</button>'
                                        html += '<button class="paypal-btn" value="' + object.id + '">当前订单正在退货中</button>'
                                    } else if (object.orderTypeId === 13) {
                                        html += '<button class="paypal-btn change-one" value="' + object.id + '">再次退款</button>'
                                    } else if (object.orderTypeId === 14) {
                                        html += '<button class="paypal-btn exit-one" value="' + object.id + '">再次换货</button>'
                                    } else if (item.orderTypeId === 15) {
                                        html += '<button class="blue-btn delete-btn-one" value="' + object.id + '">删除</button>'
                                    } else if (item.orderTypeId === 16) {
                                        html += '<button class="blue-btn delete-btn-one value="' + object.id + '"">删除</button>'
                                    }

                                    html += '</p>\n' +
                                    '                            </div>\n' +
                                    '                        </div>\n';
                                })

                                html += '<hr><div class="order-card-body-child"><div class="order-card-body-child-flex">'

                                if(!item.check) {
                                    html += '<button class="paypal-btn go-paypal" value="' + item.id + '">前往支付页面</button>'
                                    html += '<button class="paypal-btn go-success" value="' + item.id + '">直接完成</button>'
                                    html += '<button class="paypal-btn close-paypal" value="' + item.id + '">取消订单</button>'

                                } else {
                                    if (item.orderTypeId === 8) {
                                        html += '<button class="warn-btn have-all" value="' + item.id + '">全部收货</button>'
                                        html += '<button class="warn-btn change-all" value="' + item.id + '">全部换货</button>'
                                        html += '<button class="paypal-btn exit-all" value="' + item.id + '">全部退货退款</button>'
                                    } else if (item.orderTypeId === 9) {
                                        html += '<button class="warn-btn have-all" value="' + item.id + '">全部收货</button>'
                                        html += '<button class="warn-btn change-all" value="' + item.id + '">全部换货</button>'
                                        html += '<button class="paypal-btn exit-all" value="' + item.id + '">全部退货退款</button>'
                                    } else if (item.orderTypeId === 10) {
                                        html += '<button class="blue-btn">已全部收货</button>'
                                        html += '<button class="warn-btn change-all" value="' + item.id + '">全部换货</button>'
                                        html += '<button class="paypal-btn exit-all" value="' + item.id + '">全部退货退款</button>'
                                        html += '<button class="blue-btn delete-btn-all" value="' + item.id + '">删除</button>'
                                    } else if (item.orderTypeId === 15) {
                                        html += '<button class="blue-btn">订单已取消</button>'
                                        html += '<button class="blue-btn delete-btn-all" value="' + item.id + '">删除</button>'
                                    } else if (item.orderTypeId === 16) {
                                        html += '<button class="blue-btn">订单已超时</button>'
                                        html += '<button class="blue-btn delete-btn-all" value="' + item.id + '">删除</button>'
                                    }
                                }

                                html += '</div></div>'
                                html += '</div></div>'
                            })
                            lis.push(html);

                            next(lis.join(''), page < result.count);
                        }
                    })
                }
            });
        });
    }

    function userLoad() {
        $.ajax({
            type: 'post',
            url: '/reception/user/info',
            success: function (result) {
                if (result.success) {
                    $('.author_img').attr('src', result.data.avatar);
                    $('.user-name').text(result.data.nickname);
                }
            }
        })
    }

    function commodityTypeNumber() {
        $.ajax({
            type: 'post',
            url: '/reception/commodity/typenumber',
            success: function (result) {
                console.log(result.data)
                if (result.success) {
                    let num = 0;
                    $.each(result.data, function (i, object) {
                        num += parseInt(object.number);
                    })

                    $('.commodity_type_number').append('<li>\n' +
                        '                                <a class="d-flex justify-content-between commodity-type-btn-reset" href="javascript:">\n' +
                        '                                    <p>所有订单</p>\n' +
                        '                                    <p>' + num + '</p>\n' +
                        '                                </a>\n' +
                        '                            </li>\n');
                    $.each(result.data, function (i, object) {
                        $('.commodity_type_number').append('<li>\n' +
                            '                                <a class="d-flex justify-content-between commodity-type-btn" href="javascript:" lay-value="' + object.id + '">\n' +
                            '                                    <p>' + object.name + '</p>\n' +
                            '                                    <p>' + object.number + '</p>\n' +
                            '                                </a>\n' +
                            '                            </li>\n');
                    })
                }
            }
        })
    }

</script>
</body>
</html>